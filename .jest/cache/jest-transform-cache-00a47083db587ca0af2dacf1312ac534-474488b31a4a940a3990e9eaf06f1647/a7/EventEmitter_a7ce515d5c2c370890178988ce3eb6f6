e6977c768270967ef782e933a6aace80
"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var EventEmitter = function () {
  function EventEmitter() {
    (0, _classCallCheck2.default)(this, EventEmitter);
    this._registry = {};
  }
  (0, _createClass2.default)(EventEmitter, [{
    key: "addListener",
    value: function addListener(eventType, listener, context) {
      var registrations = allocate(this._registry, eventType);
      var registration = {
        context: context,
        listener: listener,
        remove: function remove() {
          registrations.delete(registration);
        }
      };
      registrations.add(registration);
      return registration;
    }
  }, {
    key: "emit",
    value: function emit(eventType) {
      var registrations = this._registry[eventType];
      if (registrations != null) {
        for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {
          args[_key - 1] = arguments[_key];
        }
        for (var registration of (0, _toConsumableArray2.default)(registrations)) {
          registration.listener.apply(registration.context, args);
        }
      }
    }
  }, {
    key: "removeAllListeners",
    value: function removeAllListeners(eventType) {
      if (eventType == null) {
        this._registry = {};
      } else {
        delete this._registry[eventType];
      }
    }
  }, {
    key: "listenerCount",
    value: function listenerCount(eventType) {
      var registrations = this._registry[eventType];
      return registrations == null ? 0 : registrations.size;
    }
  }]);
  return EventEmitter;
}();
exports.default = EventEmitter;
function allocate(registry, eventType) {
  var registrations = registry[eventType];
  if (registrations == null) {
    registrations = new Set();
    registry[eventType] = registrations;
  }
  return registrations;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJFdmVudEVtaXR0ZXIiLCJfY2xhc3NDYWxsQ2hlY2syIiwiZGVmYXVsdCIsIl9yZWdpc3RyeSIsIl9jcmVhdGVDbGFzczIiLCJrZXkiLCJ2YWx1ZSIsImFkZExpc3RlbmVyIiwiZXZlbnRUeXBlIiwibGlzdGVuZXIiLCJjb250ZXh0IiwicmVnaXN0cmF0aW9ucyIsImFsbG9jYXRlIiwicmVnaXN0cmF0aW9uIiwicmVtb3ZlIiwiZGVsZXRlIiwiYWRkIiwiZW1pdCIsIl9sZW4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJhcmdzIiwiQXJyYXkiLCJfa2V5IiwiX3RvQ29uc3VtYWJsZUFycmF5MiIsImFwcGx5IiwicmVtb3ZlQWxsTGlzdGVuZXJzIiwibGlzdGVuZXJDb3VudCIsInNpemUiLCJleHBvcnRzIiwicmVnaXN0cnkiLCJTZXQiXSwic291cmNlcyI6WyJFdmVudEVtaXR0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93IHN0cmljdFxuICogQGZvcm1hdFxuICovXG5cbmV4cG9ydCBpbnRlcmZhY2UgRXZlbnRTdWJzY3JpcHRpb24ge1xuICByZW1vdmUoKTogdm9pZDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJRXZlbnRFbWl0dGVyPFRFdmVudFRvQXJnc01hcDogey4uLn0+IHtcbiAgYWRkTGlzdGVuZXI8VEV2ZW50OiAkS2V5czxURXZlbnRUb0FyZ3NNYXA+PihcbiAgICBldmVudFR5cGU6IFRFdmVudCxcbiAgICBsaXN0ZW5lcjogKC4uLmFyZ3M6ICRFbGVtZW50VHlwZTxURXZlbnRUb0FyZ3NNYXAsIFRFdmVudD4pID0+IG1peGVkLFxuICAgIGNvbnRleHQ/OiBtaXhlZCxcbiAgKTogRXZlbnRTdWJzY3JpcHRpb247XG5cbiAgZW1pdDxURXZlbnQ6ICRLZXlzPFRFdmVudFRvQXJnc01hcD4+KFxuICAgIGV2ZW50VHlwZTogVEV2ZW50LFxuICAgIC4uLmFyZ3M6ICRFbGVtZW50VHlwZTxURXZlbnRUb0FyZ3NNYXAsIFRFdmVudD5cbiAgKTogdm9pZDtcblxuICByZW1vdmVBbGxMaXN0ZW5lcnM8VEV2ZW50OiAkS2V5czxURXZlbnRUb0FyZ3NNYXA+PihldmVudFR5cGU/OiA/VEV2ZW50KTogdm9pZDtcblxuICBsaXN0ZW5lckNvdW50PFRFdmVudDogJEtleXM8VEV2ZW50VG9BcmdzTWFwPj4oZXZlbnRUeXBlOiBURXZlbnQpOiBudW1iZXI7XG59XG5cbmludGVyZmFjZSBSZWdpc3RyYXRpb248VEFyZ3M+IHtcbiAgK2NvbnRleHQ6IG1peGVkO1xuICArbGlzdGVuZXI6ICguLi5hcmdzOiBUQXJncykgPT4gbWl4ZWQ7XG4gICtyZW1vdmU6ICgpID0+IHZvaWQ7XG59XG5cbnR5cGUgUmVnaXN0cnk8VEV2ZW50VG9BcmdzTWFwOiB7Li4ufT4gPSAkT2JqTWFwPFxuICBURXZlbnRUb0FyZ3NNYXAsXG4gIDxUQXJncz4oVEFyZ3MpID0+IFNldDxSZWdpc3RyYXRpb248VEFyZ3M+Pixcbj47XG5cbi8qKlxuICogRXZlbnRFbWl0dGVyIG1hbmFnZXMgbGlzdGVuZXJzIGFuZCBwdWJsaXNoZXMgZXZlbnRzIHRvIHRoZW0uXG4gKlxuICogRXZlbnRFbWl0dGVyIGFjY2VwdHMgYSBzaW5nbGUgdHlwZSBwYXJhbWV0ZXIgdGhhdCBkZWZpbmVzIHRoZSB2YWxpZCBldmVudHNcbiAqIGFuZCBhc3NvY2lhdGVkIGxpc3RlbmVyIGFyZ3VtZW50KHMpLlxuICpcbiAqIEBleGFtcGxlXG4gKlxuICogICBjb25zdCBlbWl0dGVyID0gbmV3IEV2ZW50RW1pdHRlcjx7XG4gKiAgICAgc3VjY2VzczogW251bWJlciwgc3RyaW5nXSxcbiAqICAgICBlcnJvcjogW0Vycm9yXSxcbiAqICAgfT4oKTtcbiAqXG4gKiAgIGVtaXR0ZXIub24oJ3N1Y2Nlc3MnLCAoc3RhdHVzQ29kZSwgcmVzcG9uc2VUZXh0KSA9PiB7Li4ufSk7XG4gKiAgIGVtaXR0ZXIuZW1pdCgnc3VjY2VzcycsIDIwMCwgJy4uLicpO1xuICpcbiAqICAgZW1pdHRlci5vbignZXJyb3InLCBlcnJvciA9PiB7Li4ufSk7XG4gKiAgIGVtaXR0ZXIuZW1pdCgnZXJyb3InLCBuZXcgRXJyb3IoJ1Jlc291cmNlIG5vdCBmb3VuZCcpKTtcbiAqXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEV2ZW50RW1pdHRlcjxURXZlbnRUb0FyZ3NNYXA6IHsuLi59PlxuICBpbXBsZW1lbnRzIElFdmVudEVtaXR0ZXI8VEV2ZW50VG9BcmdzTWFwPlxue1xuICBfcmVnaXN0cnk6IFJlZ2lzdHJ5PFRFdmVudFRvQXJnc01hcD4gPSB7fTtcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGEgbGlzdGVuZXIgdGhhdCBpcyBjYWxsZWQgd2hlbiB0aGUgc3VwcGxpZWQgZXZlbnQgaXMgZW1pdHRlZC5cbiAgICogUmV0dXJucyBhIHN1YnNjcmlwdGlvbiB0aGF0IGhhcyBhIGByZW1vdmVgIG1ldGhvZCB0byB1bmRvIHJlZ2lzdHJhdGlvbi5cbiAgICovXG4gIGFkZExpc3RlbmVyPFRFdmVudDogJEtleXM8VEV2ZW50VG9BcmdzTWFwPj4oXG4gICAgZXZlbnRUeXBlOiBURXZlbnQsXG4gICAgbGlzdGVuZXI6ICguLi5hcmdzOiAkRWxlbWVudFR5cGU8VEV2ZW50VG9BcmdzTWFwLCBURXZlbnQ+KSA9PiBtaXhlZCxcbiAgICBjb250ZXh0OiBtaXhlZCxcbiAgKTogRXZlbnRTdWJzY3JpcHRpb24ge1xuICAgIGNvbnN0IHJlZ2lzdHJhdGlvbnMgPSBhbGxvY2F0ZSh0aGlzLl9yZWdpc3RyeSwgZXZlbnRUeXBlKTtcbiAgICBjb25zdCByZWdpc3RyYXRpb246IFJlZ2lzdHJhdGlvbjwkRWxlbWVudFR5cGU8VEV2ZW50VG9BcmdzTWFwLCBURXZlbnQ+PiA9IHtcbiAgICAgIGNvbnRleHQsXG4gICAgICBsaXN0ZW5lcixcbiAgICAgIHJlbW92ZSgpOiB2b2lkIHtcbiAgICAgICAgcmVnaXN0cmF0aW9ucy5kZWxldGUocmVnaXN0cmF0aW9uKTtcbiAgICAgIH0sXG4gICAgfTtcbiAgICByZWdpc3RyYXRpb25zLmFkZChyZWdpc3RyYXRpb24pO1xuICAgIHJldHVybiByZWdpc3RyYXRpb247XG4gIH1cblxuICAvKipcbiAgICogRW1pdHMgdGhlIHN1cHBsaWVkIGV2ZW50LiBBZGRpdGlvbmFsIGFyZ3VtZW50cyBzdXBwbGllZCB0byBgZW1pdGAgd2lsbCBiZVxuICAgKiBwYXNzZWQgdGhyb3VnaCB0byBlYWNoIG9mIHRoZSByZWdpc3RlcmVkIGxpc3RlbmVycy5cbiAgICpcbiAgICogSWYgYSBsaXN0ZW5lciBtb2RpZmllcyB0aGUgbGlzdGVuZXJzIHJlZ2lzdGVyZWQgZm9yIHRoZSBzYW1lIGV2ZW50LCB0aG9zZVxuICAgKiBjaGFuZ2VzIHdpbGwgbm90IGJlIHJlZmxlY3RlZCBpbiB0aGUgY3VycmVudCBpbnZvY2F0aW9uIG9mIGBlbWl0YC5cbiAgICovXG4gIGVtaXQ8VEV2ZW50OiAkS2V5czxURXZlbnRUb0FyZ3NNYXA+PihcbiAgICBldmVudFR5cGU6IFRFdmVudCxcbiAgICAuLi5hcmdzOiAkRWxlbWVudFR5cGU8VEV2ZW50VG9BcmdzTWFwLCBURXZlbnQ+XG4gICk6IHZvaWQge1xuICAgIGNvbnN0IHJlZ2lzdHJhdGlvbnM6ID9TZXQ8XG4gICAgICBSZWdpc3RyYXRpb248JEVsZW1lbnRUeXBlPFRFdmVudFRvQXJnc01hcCwgVEV2ZW50Pj4sXG4gICAgPiA9IHRoaXMuX3JlZ2lzdHJ5W2V2ZW50VHlwZV07XG4gICAgaWYgKHJlZ2lzdHJhdGlvbnMgIT0gbnVsbCkge1xuICAgICAgZm9yIChjb25zdCByZWdpc3RyYXRpb24gb2YgWy4uLnJlZ2lzdHJhdGlvbnNdKSB7XG4gICAgICAgIHJlZ2lzdHJhdGlvbi5saXN0ZW5lci5hcHBseShyZWdpc3RyYXRpb24uY29udGV4dCwgYXJncyk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgYWxsIHJlZ2lzdGVyZWQgbGlzdGVuZXJzLlxuICAgKi9cbiAgcmVtb3ZlQWxsTGlzdGVuZXJzPFRFdmVudDogJEtleXM8VEV2ZW50VG9BcmdzTWFwPj4oXG4gICAgZXZlbnRUeXBlPzogP1RFdmVudCxcbiAgKTogdm9pZCB7XG4gICAgaWYgKGV2ZW50VHlwZSA9PSBudWxsKSB7XG4gICAgICB0aGlzLl9yZWdpc3RyeSA9IHt9O1xuICAgIH0gZWxzZSB7XG4gICAgICBkZWxldGUgdGhpcy5fcmVnaXN0cnlbZXZlbnRUeXBlXTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIHJlZ2lzdGVyZWQgbGlzdGVuZXJzIGZvciB0aGUgc3VwcGxpZWQgZXZlbnQuXG4gICAqL1xuICBsaXN0ZW5lckNvdW50PFRFdmVudDogJEtleXM8VEV2ZW50VG9BcmdzTWFwPj4oZXZlbnRUeXBlOiBURXZlbnQpOiBudW1iZXIge1xuICAgIGNvbnN0IHJlZ2lzdHJhdGlvbnM6ID9TZXQ8UmVnaXN0cmF0aW9uPG1peGVkPj4gPSB0aGlzLl9yZWdpc3RyeVtldmVudFR5cGVdO1xuICAgIHJldHVybiByZWdpc3RyYXRpb25zID09IG51bGwgPyAwIDogcmVnaXN0cmF0aW9ucy5zaXplO1xuICB9XG59XG5cbmZ1bmN0aW9uIGFsbG9jYXRlPFxuICBURXZlbnRUb0FyZ3NNYXA6IHsuLi59LFxuICBURXZlbnQ6ICRLZXlzPFRFdmVudFRvQXJnc01hcD4sXG4gIFRFdmVudEFyZ3M6ICRFbGVtZW50VHlwZTxURXZlbnRUb0FyZ3NNYXAsIFRFdmVudD4sXG4+KFxuICByZWdpc3RyeTogUmVnaXN0cnk8VEV2ZW50VG9BcmdzTWFwPixcbiAgZXZlbnRUeXBlOiBURXZlbnQsXG4pOiBTZXQ8UmVnaXN0cmF0aW9uPFRFdmVudEFyZ3M+PiB7XG4gIGxldCByZWdpc3RyYXRpb25zOiA/U2V0PFJlZ2lzdHJhdGlvbjxURXZlbnRBcmdzPj4gPSByZWdpc3RyeVtldmVudFR5cGVdO1xuICBpZiAocmVnaXN0cmF0aW9ucyA9PSBudWxsKSB7XG4gICAgcmVnaXN0cmF0aW9ucyA9IG5ldyBTZXQoKTtcbiAgICByZWdpc3RyeVtldmVudFR5cGVdID0gcmVnaXN0cmF0aW9ucztcbiAgfVxuICByZXR1cm4gcmVnaXN0cmF0aW9ucztcbn1cbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztJQThEcUJBLFlBQVk7RUFBQSxTQUFBQSxhQUFBO0lBQUEsSUFBQUMsZ0JBQUEsQ0FBQUMsT0FBQSxRQUFBRixZQUFBO0lBQUEsS0FHL0JHLFNBQVMsR0FBOEIsQ0FBQyxDQUFDO0VBQUE7RUFBQSxJQUFBQyxhQUFBLENBQUFGLE9BQUEsRUFBQUYsWUFBQTtJQUFBSyxHQUFBO0lBQUFDLEtBQUEsRUFNekMsU0FBQUMsWUFDRUMsU0FBaUIsRUFDakJDLFFBQW1FLEVBQ25FQyxPQUFjLEVBQ0s7TUFDbkIsSUFBTUMsYUFBYSxHQUFHQyxRQUFRLENBQUMsSUFBSSxDQUFDVCxTQUFTLEVBQUVLLFNBQVMsQ0FBQztNQUN6RCxJQUFNSyxZQUFpRSxHQUFHO1FBQ3hFSCxPQUFPLEVBQVBBLE9BQU87UUFDUEQsUUFBUSxFQUFSQSxRQUFRO1FBQ1JLLE1BQU0sV0FBQUEsT0FBQSxFQUFTO1VBQ2JILGFBQWEsQ0FBQ0ksTUFBTSxDQUFDRixZQUFZLENBQUM7UUFDcEM7TUFDRixDQUFDO01BQ0RGLGFBQWEsQ0FBQ0ssR0FBRyxDQUFDSCxZQUFZLENBQUM7TUFDL0IsT0FBT0EsWUFBWTtJQUNyQjtFQUFDO0lBQUFSLEdBQUE7SUFBQUMsS0FBQSxFQVNELFNBQUFXLEtBQ0VULFNBQWlCLEVBRVg7TUFDTixJQUFNRyxhQUVMLEdBQUcsSUFBSSxDQUFDUixTQUFTLENBQUNLLFNBQVMsQ0FBQztNQUM3QixJQUFJRyxhQUFhLElBQUksSUFBSSxFQUFFO1FBQUEsU0FBQU8sSUFBQSxHQUFBQyxTQUFBLENBQUFDLE1BQUEsRUFMeEJDLElBQUksT0FBQUMsS0FBQSxDQUFBSixJQUFBLE9BQUFBLElBQUEsV0FBQUssSUFBQSxNQUFBQSxJQUFBLEdBQUFMLElBQUEsRUFBQUssSUFBQTtVQUFKRixJQUFJLENBQUFFLElBQUEsUUFBQUosU0FBQSxDQUFBSSxJQUFBO1FBQUE7UUFNTCxLQUFLLElBQU1WLFlBQVksUUFBQVcsbUJBQUEsQ0FBQXRCLE9BQUEsRUFBUVMsYUFBYSxHQUFHO1VBQzdDRSxZQUFZLENBQUNKLFFBQVEsQ0FBQ2dCLEtBQUssQ0FBQ1osWUFBWSxDQUFDSCxPQUFPLEVBQUVXLElBQUksQ0FBQztRQUN6RDtNQUNGO0lBQ0Y7RUFBQztJQUFBaEIsR0FBQTtJQUFBQyxLQUFBLEVBS0QsU0FBQW9CLG1CQUNFbEIsU0FBbUIsRUFDYjtNQUNOLElBQUlBLFNBQVMsSUFBSSxJQUFJLEVBQUU7UUFDckIsSUFBSSxDQUFDTCxTQUFTLEdBQUcsQ0FBQyxDQUFDO01BQ3JCLENBQUMsTUFBTTtRQUNMLE9BQU8sSUFBSSxDQUFDQSxTQUFTLENBQUNLLFNBQVMsQ0FBQztNQUNsQztJQUNGO0VBQUM7SUFBQUgsR0FBQTtJQUFBQyxLQUFBLEVBS0QsU0FBQXFCLGNBQThDbkIsU0FBaUIsRUFBVTtNQUN2RSxJQUFNRyxhQUF3QyxHQUFHLElBQUksQ0FBQ1IsU0FBUyxDQUFDSyxTQUFTLENBQUM7TUFDMUUsT0FBT0csYUFBYSxJQUFJLElBQUksR0FBRyxDQUFDLEdBQUdBLGFBQWEsQ0FBQ2lCLElBQUk7SUFDdkQ7RUFBQztFQUFBLE9BQUE1QixZQUFBO0FBQUE7QUFBQTZCLE9BQUEsQ0FBQTNCLE9BQUEsR0FBQUYsWUFBQTtBQUdILFNBQVNZLFFBQVFBLENBS2ZrQixRQUFtQyxFQUNuQ3RCLFNBQWlCLEVBQ2M7RUFDL0IsSUFBSUcsYUFBNkMsR0FBR21CLFFBQVEsQ0FBQ3RCLFNBQVMsQ0FBQztFQUN2RSxJQUFJRyxhQUFhLElBQUksSUFBSSxFQUFFO0lBQ3pCQSxhQUFhLEdBQUcsSUFBSW9CLEdBQUcsRUFBRTtJQUN6QkQsUUFBUSxDQUFDdEIsU0FBUyxDQUFDLEdBQUdHLGFBQWE7RUFDckM7RUFDQSxPQUFPQSxhQUFhO0FBQ3RCIn0=